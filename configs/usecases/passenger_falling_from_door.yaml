metadata:
  id: passenger_falling_from_door
  description: Detect passengers falling from doors in motion
  severity: critical
  frequency: real-time
  domains: ["All"]
detector: pose_velocity
tracker: bytetrack
interval: 1
lines:
  - id: door_edge
    points: [[200,540],[1720,540]]
rules:
  - type: pose_collapse
    min_score: 0.60
    min_speed_kmph: 0
    door_required: false
    max_prone_height_px: 220
    min_abs_accel: 1.5
    cooldown_seconds: 2
notifications:
  mqtt_topic: "{{MQTT_BROKER_URL}}/common/fall"
  clip:
    pre_seconds: 6
    post_seconds: 12
  emergency_signal: true
artifacts:
  snapshot: true
  clip: true
  manifest: true
