metadata:
  id: passenger_falling_from_door
  description: Detect passengers falling from doors in motion
  severity: critical
  frequency: real-time
  domains: ["All"]
detector: pose_velocity
tracker: bytetrack
interval: 1
lines:
  - id: door_edge
    points: [[200,540],[1720,540]]
rules:
  - type: line_crossing
    line_id: door_edge
    classes: ["person"]
    direction: outward
    velocity_min: 1.5
  - type: prone_dwell
    min_duration_seconds: 3
    max_height_px: 180
notifications:
  mqtt_topic: "{{MQTT_BROKER_URL}}/common/fall"
  clip:
    pre_seconds: 6
    post_seconds: 12
  emergency_signal: true
artifacts:
  snapshot: true
  clip: true
  manifest: true
